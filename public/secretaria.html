<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Liberação de Alunos - Secretaria</title>
</head>
<body>
  <h2>Nova Liberação de Aluno</h2>

  <form id="form">
    <input placeholder="Aluno" id="aluno" required><br><br>
    <input placeholder="Turma" id="turma" required><br><br>
    <input placeholder="Responsável" id="responsavel" required><br><br>
    <input placeholder="Telefone" id="telefone" required><br><br>
    <input placeholder="Terceiro autorizado" id="terceiro" required><br><br>
    <input placeholder="Documento" id="documento" required><br><br>
    <input placeholder="Observações" id="observacoes"><br><br>

    <button type="submit">Gerar Liberação</button>
  </form>

  <h3 id="codigo"></h3>

  <script>
    const API = "https://github.com/vhugonatal-hue/liberacao-alunos-backend/tree/main";

    document.getElementById("form").addEventListener("submit", async (e) => {
      e.preventDefault();

      const dados = {
        aluno: aluno.value,
        turma: turma.value,
        responsavel: responsavel.value,
        telefone: telefone.value,
        terceiro: terceiro.value,
        documento: documento.value,
        observacoes: observacoes.value
      };

      const resposta = await fetch(API + "/liberacoes", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(dados)
      });

      const json = await resposta.json();
      document.getElementById("codigo").innerText =
        "Código gerado: " + json.codigo;
    });
  </script>
</body>
</html>
